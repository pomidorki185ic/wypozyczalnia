{% extends 'base.html' %}
{% load static %}
    {% block content %}
<script>

    function myFunction1() {

        document.getElementById("id_opis").style.display = "none";
        document.getElementById("id_status").type = "hidden";
        document.getElementById("id_data_wykonania").type = "hidden";
    }
    function myFunction() {
        document.getElementById("id_opis").value = document.getElementById("opis").value;
        document.getElementById("id_status").value = document.getElementById("status").value;
        document.getElementById("id_data_wykonania").value = document.getElementById("data").value;

        var opis = document.getElementById("opis").value;
        if (opis.length == 0) {
            document.getElementById("box").style.display = "block";
            document.getElementById('divek').className = "alert show";
            document.getElementById('divek').className = "alert showAlert";
        }
    }
    function data() {
        var data = new Date(document.getElementById("data").value);
        var data_dzisiaj = new Date();
        var dzienDzisiaj = new Date().getDate();
        var miesiac_aktualny = data_dzisiaj.getMonth() + 1;
        var dataformat = data_dzisiaj.getFullYear() + "-" + 0+(data_dzisiaj.getMonth()+1) + "-" + data_dzisiaj.getDate();
        console.log(dataformat);
        if (data.getDate() < dzienDzisiaj && data.getMonth() + 1 == miesiac_aktualny) {
            document.getElementById("data").value = dataformat;
            document.getElementById('dataalert').className = "alert show";
            document.getElementById('dataalert').className = "alert showAlert";
        }
    }
    function zamknij() {
        document.getElementById("box").style.display = "none";
    }
    function bladWyl() {
        document.getElementById('divek').className = "alert hide";
        document.getElementById('dataalert').className = "alert hide";
    }
</script>
<style>
 
    #opis {
        margin-left: 10px;
        width: 500px;
        height: 100px;
        padding: 12px 20px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 4px;
        background-color: #f8f8f8;
        resize: none;
    }

    #box {
        width: 500px;
        overflow: hidden;
        background: #f1f1f1;
        box-shadow: 0 0 20px black;
        border-radius: 8px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
        z-index: 9999;
        padding: 10px;
        text-align: center;
        display: none;
    }

        #box h1 {
            color: #333;
        }

    #close {
        font-size: 20px;
        color: white;
        padding: 10px 30px;
        cursor: pointer;
        background: #3498db;
        display: inline-block;
        border-radius: 4px;
    }

    @import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');

    .alert {
        background: #ffdb9b;
        padding: 20px 40px;
        min-width: 420px;
        position: absolute;
        right: 0;
        top: 10px;
        border-radius: 4px;
        border-left: 8px solid #ffa502;
        overflow: hidden;
        opacity: 0;
        pointer-events: none;
    }

        .alert.showAlert {
            opacity: 1;
            pointer-events: auto;
        }


        .alert .fa-exclamation-circle {
            position: absolute;
            left: 20px;
            top: 50%;
            color: #ce8500;
            font-size: 30px;
        }

        .alert .msg {
            padding: 0 20px;
            font-size: 18px;
            color: #ce8500;
        }

        .alert .close-btn {
            position: absolute;
            right: 0px;
            top: 50%;
            background: #ffd080;
            padding: 20px 18px;
            cursor: pointer;
        }

            .alert .close-btn:hover {
                background: #ffc766;
            }

            .alert .close-btn .fas {
                color: #ce8500;
                font-size: 22px;
                line-height: 40px;
            }


</style>

<div class="glowny">
    <p style="margin-left: 10px;">Wprowadź treść zadania</p>
    <textarea id="opis" placeholder="Treść zadania"></textarea>
    <div style="display: flex; width: 650px; justify-content: space-between; margin: auto;">
        <div>
            <p>Wybierz status</p>
            <select id="status" class="btn btn-primary">
                <option value="Ważne">Ważne</option>
                <option value="Normalne">Normalne</option>
                <option value="Niskie">Niskie</option>
            </select>
        </div>
        <div>
            <p>Wybierz date</p>
            <input class="btn btn-primary" type="date" id="data" name="trip-start" onchange="data()"
                   value="2021-04-30"
                   min="2020-01-01" max="2022-12-31">
        </div>
    </div>
    <form style="font-family: 'Advent Pro', serif; color: white; margin-left:250px;" method="post">
        {% csrf_token %}
        {{form.data_wykonania}}
        {{form.opis}}
        {{form.status}}
        <button style="margin-left:80%" type="submit" class="btn btn-success" onclick="myFunction()">Dodaj notatke</button>
    </form>

    <h1 style="margin-left: 3px; color: white; font-family: 'Advent Pro', serif; margin-top:50px">Dzisiejsze zadania do wykonania</h1>
    <div style="margin-left: 3px; color: white; font-family: 'Advent Pro', serif; float: left; width: 100%; text-align: center; margin-top:10px">

        <table class="table">
            <thead class="thead-dark">
                <tr>
                    <th style="font-family: 'Advent Pro'" scope="col">Numer zadania</th>
                    <th style="font-family: 'Advent Pro'" scope="col">Opis</th>
                    <th style="font-family: 'Advent Pro'" scope="col">Data wykonania</th>
                    <th style="font-family: 'Advent Pro'" scope="col">Status</th>
                    <th style="font-family: 'Advent Pro'" scope="col"></th>
                </tr>
                {% for notatka in notatki %}
                <tr>
                    <td style="color:white;font-family: 'Advent Pro'">{{ notatka.pk }}</td>
                    <td style="color:white;font-family: 'Advent Pro'" scope="row">{{notatka.opis}}</td>
                    <td style="color:white;font-family: 'Advent Pro'">{{ notatka.data_wykonania }}</td>
                    <td style="color:white;font-family: 'Advent Pro'">{{ notatka.status }}</td>
                    <td style="color:white;font-family: 'Advent Pro'"><button><a href="{% url 'dane_notatki' pk=notatka.pk %}">Zakończ</a></button></td>
                </tr>
                {% endfor %}
            </thead>
        </table>
    </div>

</div>

<div id="box">
    <h1>Przy dodawaniu notatki wymagana jest treść</h1>
    <button id="close" onclick="zamknij()">Zamknij</button>
</div>

 <div id="divek" class="alert hide">
        <span class="fas fa-exclamation-circle"></span>
        <span class="msg">Przy dodawaniu notatki wymagana jest treść</span>
        <div onclick="bladWyl()" class="close-btn">
            <span class="fas fa-times"></span>
        </div>
    </div>
 <div id="dataalert" class="alert hide">
     <span class="fas fa-exclamation-circle"></span>
     <span class="msg">Wybrałeś dzień rozpoczęcia wcześniejszy od dnia dzisiejszego</span>
     <div onclick="bladWyl()" class="close-btn">
         <span class="fas fa-times"></span>
     </div>
 </div>

    {% endblock %}
